<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Å—Ö–µ–º—ã ‚Äî –ó–∞—Å—Ç–∞–≤–∫–∞</title>
    <link rel="stylesheet" href="css/game.css">
</head>
<body class="game-page">
    <div class="game-container">
        <div class="welcome-screen">
            <p class="top-nav"><a href="../index.html" class="link-home">‚Üê –ù–∞ –≥–ª–∞–≤–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É</a></p>
            <h1>‚ö° –≠–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Å—Ö–µ–º—ã</h1>
            <p>–ö—É—Ä—Å–æ–≤–æ–π –ø—Ä–æ–µ–∫—Ç. –ú–∏–Ω–∏-–∏–≥—Ä–∞ –ø–æ —Ç–µ–º–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π.</p>
            <form id="welcomeForm">
                <input type="text" id="playerName" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è" required maxlength="30" autocomplete="off">
                <button type="submit" class="btn">–ù–∞—á–∞—Ç—å –∏–≥—Ä—É</button>
            </form>
            <p style="margin-top:20px;">
                <a href="rating.html" class="btn btn-secondary">–†–µ–π—Ç–∏–Ω–≥ –∏–≥—Ä–æ–∫–æ–≤</a>
            </p>

            <div class="test-mode" id="testMode" style="display: none;">
                <h3>–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —É—Ä–æ–≤–Ω–µ–π (–±–µ–∑ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Å –Ω–∞—á–∞–ª–∞)</h3>
                <a href="game.html?name=–¢–µ—Å—Ç&level=1&test=1" class="btn">–£—Ä–æ–≤–µ–Ω—å 1</a>
                <a href="game.html?name=–¢–µ—Å—Ç&level=2&test=1" class="btn">–£—Ä–æ–≤–µ–Ω—å 2</a>
                <a href="game.html?name=–¢–µ—Å—Ç&level=3&test=1" class="btn">–£—Ä–æ–≤–µ–Ω—å 3</a>
            </div>
        </div>
    </div>

    <button class="palette-toggle" id="paletteToggle" title="–°–º–µ–Ω–∏—Ç—å –ø–∞–ª–∏—Ç—Ä—É">üé®</button>

    <script src="js/storage.js"></script>
    <script>
        (function () {
            const params = new URLSearchParams(location.search);
            if (params.get('test') === '1') {
                document.getElementById('testMode').style.display = 'block';
            }
            const last = typeof getLastResult === 'function' ? getLastResult() : null;
            if (last) {
                const input = document.getElementById('playerName');
                input.placeholder = '–ò–º—è (–±—ã–ª–æ: ' + (last.name.length > 12 ? last.name.slice(0, 10) + '‚Ä¶' : last.name) + ')';
            }
            document.getElementById('welcomeForm').addEventListener('submit', function (e) {
                e.preventDefault();
                const name = document.getElementById('playerName').value.trim() || '–ò–≥—Ä–æ–∫';
                localStorage.setItem('Game_ElectricCircuits_name', name);
                location.href = 'game.html?name=' + encodeURIComponent(name);
            });
            document.getElementById('paletteToggle').addEventListener('click', function () {
                document.body.classList.toggle('palette-alt');
            });
        })();
    </script>
</body>
</html>
